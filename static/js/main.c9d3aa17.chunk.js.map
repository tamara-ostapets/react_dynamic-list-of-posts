{"version":3,"sources":["api/api.js","components/Post/Post.jsx","types.js","components/PostsList/PostsList.jsx","api/posts.js","components/NewCommentForm/NewCommentForm.jsx","api/comments.js","components/PostDetails/PostDetails.jsx","App.jsx","api/users.js","index.js"],"names":["request","url","options","a","fetch","then","response","ok","Error","json","result","data","Post","PropTypes","shape","comments","array","title","string","body","id","number","userId","selectedPost","post","handleClick","className","onClick","type","PostsList","setPost","useState","posts","setPosts","useEffect","getUserPosts","map","filter","key","NewCommentForm","postId","addComment","name","setName","email","setEmail","setBody","onSubmit","e","preventDefault","newComment","submitHandler","value","placeholder","onChange","currentTarget","postComment","comment","method","JSON","stringify","deleteComment","commentId","PostDetails","setComments","isVisisble","setVisibility","loadComments","api","getComments","commentsFromServer","newComments","trim","length","App","users","setUsers","setUserId","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c9d3aa17.chunk.js","sourcesContent":["export const BASE_URL = 'https://mate-api.herokuapp.com';\n// eslint-disable-next-line\nexport const request = async(url, options) => fetch(`${BASE_URL}${url}`, options)\n  .then((response) => {\n    if (!response.ok) {\n      throw Error;\n    }\n\n    return response.json();\n  })\n  .then(result => result.data);\n\nexport const remove = url => request(url, { method: 'DELETE' });\n\nexport const post = (url, data) => request(url, {\n  method: 'POST',\n  body: JSON.stringify(data),\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { TypePost } from '../../types';\n\nexport const Post = ({\n  selectedPost,\n  post,\n  handleClick,\n}) => {\n  const clickHandlerOpen = (postOnSelection) => {\n    handleClick(postOnSelection);\n  };\n\n  const clickHandlerClose = () => {\n    handleClick({});\n  };\n\n  return (\n    <li className=\"PostsList__item\">\n      <div>\n        <b>\n          [User #\n          {post.userId}\n          ]:\n          {' '}\n        </b>\n        {post.title}\n      </div>\n\n      {(selectedPost.id !== post.id)\n        ? (\n          <button\n            onClick={() => {\n              clickHandlerOpen(post);\n            }}\n            type=\"button\"\n            className=\"PostsList__button button\"\n          >\n            Open\n          </button>\n        )\n        : (\n          <button\n            onClick={() => {\n              clickHandlerClose();\n            }}\n            type=\"button\"\n            className=\"PostsList__button button\"\n          >\n            Close\n          </button>\n        )\n      }\n    </li>\n  );\n};\n\nPost.propTypes = {\n  selectedPost: TypePost.isRequired,\n  post: TypePost.isRequired,\n  handleClick: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\n\nexport const TypePost = PropTypes.shape({\n  comments: PropTypes.array,\n  title: PropTypes.string,\n  body: PropTypes.string,\n  id: PropTypes.number,\n  userId: PropTypes.number,\n});\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { TypePost } from '../../types';\nimport './PostsList.scss';\nimport { getUserPosts, getAllPosts } from '../../api/posts';\nimport { Post } from '../Post/Post';\n\nexport const PostsList = ({\n  userId,\n  handleClick,\n  selectedPost,\n  setPost,\n}) => {\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    if (userId === 0) {\n      getAllPosts()\n      // eslint-disable-next-line\n        .then((posts) => {\n          // eslint-disable-next-line\n          posts = posts.filter(post => (post.userId <= 10 && (post.userId)));\n\n          return posts;\n        })\n        .then(setPosts);\n\n      return;\n    }\n\n    getUserPosts(userId)\n    // eslint-disable-next-line\n      .then((posts) => {\n        setPosts(posts.map(post => ({\n          comments: [],\n          id: post.id,\n          userId: post.userId,\n          title: post.title,\n          body: post.body,\n        })));\n      });\n  }, [userId]);\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\">\n        {posts.map(post => (\n          <Post\n            setPost={setPost}\n            selectedPost={selectedPost}\n            handleClick={handleClick}\n            key={post.id}\n            post={post}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nPostsList.propTypes = {\n  userId: PropTypes.number.isRequired,\n  handleClick: PropTypes.func.isRequired,\n  selectedPost: TypePost.isRequired,\n  setPost: PropTypes.func.isRequired,\n};\n","import { request } from './api';\n\nexport const getUserPosts = userId => request(`/posts?userId=${userId}`);\nexport const getAllPosts = () => request(`/posts`);\n// eslint-disable-next-line\nexport const getPostDetails = postId => request(`/posts/${postId}`);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './NewCommentForm.scss';\n\nexport const NewCommentForm = ({ postId, addComment }) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [body, setBody] = useState('');\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n\n    const newComment = {\n      postId,\n      name,\n      email,\n      body,\n    };\n\n    addComment(newComment, newComment.postId);\n    setName('');\n    setEmail('');\n    setBody('');\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={(e) => {\n        submitHandler(e);\n      }}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          value={name}\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          onChange={e => setName(e.currentTarget.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          value={email}\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          onChange={e => setEmail(e.currentTarget.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          value={body}\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          onChange={e => setBody(e.currentTarget.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n\nNewCommentForm.propTypes = {\n  addComment: PropTypes.func.isRequired,\n  postId: PropTypes.number.isRequired,\n};\n","import * as api from './api';\n\nexport const getComments = postId => api.request(`/comments?postId=${postId}`);\n// eslint-disable-next-line\nexport const postComment = (comment, postId) => api.post(`/comments?postId=${postId}`, comment);\n\nexport const deleteComment = commentId => api.remove(`/comments/${commentId}`);\n","import React, { useEffect, useState } from 'react';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\nimport { deleteComment, getComments, postComment } from '../../api/comments';\nimport { TypePost } from '../../types';\n\nexport const PostDetails = ({ post }) => {\n  const [comments, setComments] = useState([]);\n  const [isVisisble, setVisibility] = useState(true);\n\n  useEffect(() => {\n    loadComments(post.id);\n  }, [post.id]);\n\n  const loadComments = (postId) => {\n    getComments(postId)\n      .then((commentsFromServer) => {\n        const newComments = commentsFromServer.filter((comment) => {\n          if (!comment.body.trim()) {\n            return;\n          }\n\n          comment.body.trim();\n          // eslint-disable-next-line\n          return comment;\n        });\n\n        setComments(newComments);\n      });\n  };\n\n  const addPostComment = (comment, postId) => {\n    postComment(comment, postId)\n      .then(() => {\n        loadComments(postId);\n      });\n  };\n\n  const deletePostComment = (commentId, postId) => {\n    deleteComment(commentId)\n      .then(() => {\n        loadComments(postId);\n      });\n  };\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>{post.body}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n        {comments.length === 0 && 'There is no comment to display'}\n        {(comments.length > 0 && isVisisble === true) && (\n          <>\n            <button\n              type=\"button\"\n              className=\"button\"\n              onClick={() => {\n                setVisibility(false);\n              }}\n            >\n              Hide\n              {' '}\n              {comments.length}\n              {' '}\n              comments\n            </button>\n            <ul className=\"PostDetails__list\">\n\n              {comments.map(comment => (\n                <li key={comment.id} className=\"PostDetails__list-item\">\n                  <button\n                    type=\"button\"\n                    className=\"PostDetails__remove-button button\"\n                    onClick={() => deletePostComment(comment.id, post.id)}\n                  >\n                    X\n                  </button>\n                  <p>{comment.body}</p>\n                </li>\n              ))}\n            </ul>\n          </>\n        )}\n        {(comments.length > 0 && isVisisble === false) && (\n          <button\n            type=\"button\"\n            className=\"button\"\n            onClick={() => {\n              setVisibility(true);\n            }}\n          >\n            Show\n            {' '}\n            {comments.length}\n            {' '}\n            comments\n          </button>\n        )}\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm postId={post.id} addComment={addPostComment} />\n        </div>\n      </section>\n    </div>\n  );\n};\n\nPostDetails.propTypes = {\n  post: TypePost.isRequired,\n};\n","import React, { useState, useEffect } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { getUsers } from './api/users';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\n\nconst App = () => {\n  const [users, setUsers] = useState([]);\n  const [userId, setUserId] = useState(0);\n  const [selectedPost, setPost] = useState({});\n\n  useEffect(() => {\n    getUsers()\n    // eslint-disable-next-line\n      .then((users) => {\n        // eslint-disable-next-line\n        users = users\n          .filter(({ id }) => id <= 10);\n\n        setUsers(users.map(({ name, id }) => ({\n          name, id,\n        })));\n      });\n  }, []);\n\n  const handleClick = (post) => {\n    setPost(post);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            value={userId}\n            onChange={(e) => {\n              setUserId(+e.currentTarget.value);\n            }}\n          >\n            <option key=\"0\" value=\"0\">All users</option>\n            {users.map(({ name, id }) => (\n              <option\n                key={id}\n                value={id}\n              >\n                {name}\n              </option>\n            ))}\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            setPost={setPost}\n            selectedPost={selectedPost}\n            handleClick={handleClick}\n            userId={userId}\n          />\n        </div>\n\n        {selectedPost.id && (\n          <div className=\"App__content\">\n            <PostDetails post={selectedPost} />\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import { request } from './api';\n\nexport const getUsers = () => request(`/users`);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}